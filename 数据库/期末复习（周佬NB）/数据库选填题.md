# 数据库选填排雷

## **第一章 绪论**

**1.数据库**：**长期存储**在计算机内、**有组织的**、**可共享的**大量数据的集合 、DBMS管理的是机构化的数据

较小的冗余度、较高的数据独立性、易扩展性，共享

**2.数据库系统组成**：数据库、DBMS、应用程序和数据库管理员

**3.数据库系统的特点**：数据结构化（与文件系统的本质区别）

​                                      数据的共享性高、冗余度低、易扩充

​                                      数据独立性高（**物理独立性和逻辑独立性**）

​                                     数据由数据库管理系统统一管理和控制（安全性保护、完整性保护、并发控制、数据库恢复）

**4.数据模型（数据库系统的核心和基础）->组成要素**：**数据结构**、**数据操作**、**数据的完整性约束条件**

**5.数据模型**：概念模型（信息模型）用于数据库设计

​                      逻辑模型/物理模型 用于数据库系统的实现

​                      现实->信息->机器

**6.数据库系统的三级模式结构：外模式（子模式/用户模式）、模式（逻辑模式）、内模式（存储模式）**

​                                                      外模式：数据库用户能看见和使用的局部数据的逻辑结构和特征  DDL

​                                                      模   式：数据库中全体数据的逻辑结构和特征的描述，所有用户的公共数据视图

​                                                      内模式：数据物理结构和存储方法的描述，是数据在数据库内部的组织方式      

**7.数据库的二级映像功能与数据独立性**

​                                                     a.外模式/模式映像：保证了数据的**逻辑独立性**

​                                                     b.模式/内模式映像：保证了数据的**物理独立性**

## **第二章关系数据库**

**1.关系的三种类型**：基本关系、查询表、视图表

**2.三类完整性约束**：实体完整性、参照完整性、用户自定义完整性（**实体完整性**和**参照完整性**是关系模型必须满足的完整性约束，**关系的两个不变形性）

## **第三章 SQL**

**见数据库语法总结版**

索引：顺序索引、 哈希索引、 B+索引、位图索引

**数据字典：记录了数据库中所有的定义信息**

聚集函数遇到NULL时，除COUNT(*)之外，都跳过空值。只能用于select子句和having子句

create vie XXX(X,X) AS select .... 可以添加[with check option]表示对视图进行UPDATE、INSERT、DELETE要保持更新、插入、删除的行满足视图定义的谓词条件

## **第四章 数据库安全性**

GRANT  XX ON XX TO XX【with grant option】：获得了某种权限的用户可以把这种权限给其他人

REMOVE XX ON XX FROM XX【CASE】 

数据库的安全性控制：用户身份鉴别 存取控制 自主存取控制方法 审计 数据加密 （视图？？）

用户权限：数据库对象和操作类型

## **第五章 数据库完整性**

**数据的完整性**是指数据的正确性和相容性

正确性：符合当前语义和实际情况

相容性：数据库同一对象在不同关系表中的数据是符合逻辑的

- 实体完整性：主码唯一且为非空
- 参照完整性：外码的约束
- 用户定义完整性：属性上约束条件的定义

## **第六章 关系理论**

## **第七章 数据库设计**

步骤：

**1.需求分析** 

数据字典包括：数据项（不可再分的数据单位）、数据结构、数据流、数据存储和处理过程

数据字典通过对数据项和数据结构的定义来描述数据流和数据存储的逻辑内容。

**2.概念结构设计  E-R图**

E-R图的集成：属性冲突、命名冲突和结构冲突

**3.逻辑结构设计** E-R图转换成如数据库模式和外模式

**4.物理结构设计** 包括关系模式选择存取方法、设计关系、索引等数据库文件的物理存储结构  **存取方法：索引和聚簇**

**5.数据库实施**

**6.数据库运行和维护**

## **第九章 关系查询处理和查询优化**

查询处理步骤：查询分析、查询检查、查询优化、查询执行

## **第十章 数据库恢复技术**

1.事务是一个不可分割的工作单位，数据库应用程序的基本逻辑单元

2.事务是**恢复**和**并发控制**的基本单位

3.COMMIT  、ROLLBACK 、BEGIN TRANSACTION

4.事务的特性ACID  原子性 一致性 隔离性 持续性  

5.故障的种类：事务故障、系统故障（软故障）、介质故障（硬故障）、计算机病毒

6.恢复的基本原理：**冗余**（利用存储在后备副本、日志文件和数据库镜像中的冗余数据来重建数据库）

7.建立冗余数据：**数据转储+登记日志文件**

8.登记日志文件的原则：a.登记的次序严格按照并发事务b.必须先写日志文件后写数据库

## **第十一章 并发控制**

1.并发控制：为了保证事务的**隔离性**和**一致性**，数据库管理系统需要对并发操作进行正确的调度

2.并发操作带来的数据不一致性包括丢失修改、不可重复读（事务1读取数据之后，事务2增删<幻影现象>、或者插入）、读脏数据

3.并发控制的技术：封锁、时间戳、乐观控制法、多版本并发控制、

4.一级封锁 防止丢失修改

二级封锁 防止丢失修改和防止读脏数据

三级封锁都能防止

5.并发事务正确调度的准则：可串行性

6.避免活锁的方法：先来先服务

7.可串行性是并发事务正确调度的准则

冲突可串行化调度是可串行化调度的充分条件

事务遵循两段锁协议（2PL）是可串行化调度的充分条件

8.封锁对象的大小：封锁粒度